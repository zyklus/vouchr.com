TRUNCATE TABLE product_feature;

DELETE ls FROM localized_strings ls INNER JOIN product p ON (p.fk_name_string_id=ls.pk_id OR p.fk_manufacturer_string_id=ls.pk_id OR p.fk_family_string_id=ls.pk_id);
TRUNCATE TABLE product;

INSERT INTO product_feature(name) SELECT COLUMN_NAME FROM information_schema.columns WHERE TABLE_NAME='raw_products' AND ORDINAL_POSITION>3 AND COLUMN_NAME!='pk_id';

SELECT @max_id:=max(pk_id) FROM localized_strings;

INSERT INTO localized_strings(en) (SELECT DISTINCT col FROM (SELECT product_manufacturer col FROM raw_products UNION ALL SELECT product_family FROM raw_products UNION ALL SELECT product_name FROM raw_products) a WHERE col!='');

INSERT INTO product(fk_name_string_id, fk_manufacturer_string_id, fk_family_string_id) (SELECT a.pk_id, b.pk_id, c.pk_id FROM raw_products rp LEFT JOIN (SELECT pk_id, en FROM localized_strings WHERE pk_id>@max_id GROUP BY en) a ON rp.product_name=a.en LEFT JOIN (SELECT pk_id, en FROM localized_strings WHERE pk_id>@max_id GROUP BY en) b ON rp.product_manufacturer=b.en LEFT JOIN (SELECT pk_id, en FROM localized_strings WHERE pk_id>@max_id GROUP BY en) c ON rp.product_family=c.en);

TRUNCATE TABLE map_product_product_feature;

INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'has_USB' AND rp.has_USB='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'has_FireWire' AND rp.has_FireWire='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'has_tuner' AND rp.has_tuner='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'multi_tuner' AND rp.multi_tuner='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'has_composite' AND rp.has_composite='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'has_svideo' AND rp.has_svideo='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'has_component' AND rp.has_component='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'has_SCART' AND rp.has_SCART='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'for_north_america' AND rp.for_north_america='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'for_international' AND rp.for_international='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_NTSC' AND rp.is_NTSC='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_PAL' AND rp.is_PAL='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_PAL60' AND rp.is_PAL60='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_ATSC' AND rp.is_ATSC='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_CLEARQAM' AND rp.is_CLEARQAM='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_ATSC-MH' AND rp.`is_ATSC-MH`='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_SECAM' AND rp.is_SECAM='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_DVB-T' AND rp.`is_DVB-T`='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_DVB-C' AND rp.`is_DVB-C`='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_DVB-S' AND rp.`is_DVB-S`='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_DVB-S2' AND rp.`is_DVB-S2`='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_DVB-T2' AND rp.`is_DVB-T2`='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_ISDB-T' AND rp.`is_ISDB-T`='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'has_CI' AND rp.has_CI='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'has_CI+' AND rp.`has_CI+`='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'requires_EyeTV3' AND rp.requires_EyeTV3='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'requires_activation_key' AND rp.requires_activation_key='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_software' AND rp.is_software='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_hardware' AND rp.is_hardware='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'product_image' AND rp.product_image='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'USB_powered' AND rp.USB_powered='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'hardware_encoder' AND rp.hardware_encoder='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'software_encoder' AND rp.software_encoder='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'has_ethernet' AND rp.has_ethernet='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'has_wifi' AND rp.has_wifi='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'for_iPhone' AND rp.for_iPhone='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'for_iPod_touch' AND rp.for_iPod_touch='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'for_AppleTV' AND rp.for_AppleTV='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'for_Android' AND rp.for_Android='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'for_MacOS' AND rp.for_MacOS='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'for_iOS' AND rp.for_iOS='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'for_Win7' AND rp.for_Win7='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'needs_activation_key' AND rp.needs_activation_key='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_service' AND rp.is_service='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'from_Elgato' AND rp.from_Elgato='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'has_IR_receiver' AND rp.has_IR_receiver='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'has_IR_blaster' AND rp.has_IR_blaster='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'uses_Elgato_remote' AND rp.uses_Elgato_remote='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'has_CAS' AND rp.has_CAS='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_USB_host' AND rp.is_USB_host='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_remote_control' AND rp.is_remote_control='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_breakout_cable' AND rp.is_breakout_cable='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_antenna' AND rp.is_antenna='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_carrying_case' AND rp.is_carrying_case='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_MCX_F' AND rp.is_MCX_F='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_MCX_IEC' AND rp.is_MCX_IEC='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_splitter_cable' AND rp.is_splitter_cable='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_USB_cable' AND rp.is_USB_cable='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_composite_cable' AND rp.is_composite_cable='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_component_cable' AND rp.is_component_cable='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_SVIDEO_cable' AND rp.is_SVIDEO_cable='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_power_supply' AND rp.is_power_supply='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_uncompressed' AND rp.is_uncompressed='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'encodes_H264' AND rp.encodes_H264='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'encodes_MPEG1' AND rp.encodes_MPEG1='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'encodes_MPEG2' AND rp.encodes_MPEG2='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'encodes_MPEG4' AND rp.encodes_MPEG4='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'encodes_DIVX' AND rp.encodes_DIVX='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_UPNPAV_server' AND rp.is_UPNPAV_server='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_demo_version' AND rp.is_demo_version='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'has_game_mode' AND rp.has_game_mode='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_light_version' AND rp.is_light_version='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_support_eligible' AND rp.is_support_eligible='Yes';
INSERT INTO map_product_product_feature(fk_product_id, fk_feature_id) SELECT p.pk_id, pf.pk_id FROM product p INNER JOIN localized_strings p_man ON p.fk_manufacturer_string_id=p_man.pk_id INNER JOIN localized_strings p_fam ON p.fk_family_string_id=p_fam.pk_id LEFT JOIN localized_strings p_name ON p.fk_name_string_id=p_name.pk_id INNER JOIN raw_products rp ON p_man.en=rp.product_manufacturer AND p_fam.en=rp.product_family AND IFNULL(p_name.en, '')=rp.product_name, product_feature pf WHERE pf.name = 'is_PCMCIA' AND rp.is_PCMCIA='Yes';
